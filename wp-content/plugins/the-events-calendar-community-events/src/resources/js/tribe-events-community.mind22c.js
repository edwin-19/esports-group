!function(e,t){"use strict";var i={};i.init=function(){this.$event_categories=t(document.getElementById("event-categories")),this.$show_hidden_categories=t(document.getElementById("show_hidden_categories")),this.init_categories()},i.init_categories=function(){var e=this.$event_categories.data("more-text"),i=parseInt(this.$event_categories.data("shown-items"),10),n=this.$event_categories.find("> div > ul > li"),a=n.find("> ul");a.length?n.each(function(){var i=t(this),n=i.find("ul");if(n.length){var a=i.children("label"),s=n.find("li").length;a.after('<span class="tribe-toggle"><span>'+s+" "+e+"</span></span>")}}):this.$event_categories.find(".tribe-categories-with-children").removeClass("tribe-categories-with-children");var s=n.slice(i);s=s.filter(this.filter_out_selected_categories),s.length&&(s.addClass("hidden_category"),this.$show_hidden_categories.closest("div").removeClass("tribe-hide")),a.filter(this.filter_out_selected_categories).addClass("tribe-hide"),a.not(".tribe-hide").closest("li").addClass("tribe-expanded"),this.$event_categories.removeClass("tribe-hide"),t(document).on("click","#event-categories .tribe-toggle",function(){var e=t(this),i=e.closest("li");i.toggleClass("tribe-expanded")})},i.filter_out_selected_categories=function(){return!t(this).find("input:checked").length},t(function(){t(".my-events").addClass("enhanced"),i.init();var n=t(".table-menu"),a=t("#twentyfourteen-style-css").length;a&&t("body").addClass("tribe-2014"),t("#my-events-display-headers th").each(function(e){var i=t(this),a=i.attr("id"),s=i.attr("class");if(a||(a="col-"+e,i.attr("id",a)),t("#tribe-community-events tbody tr").each(function(){var i=t(this).find("th, td").eq(e);i.attr("headers",a),s&&i.addClass(s)}),!i.is(".persist")){var r=t('<li><input type="checkbox" name="toggle-cols" id="toggle-col-'+e+'" value="'+a+'" /> <label for="toggle-col-'+e+'">'+i.text()+"</label></li>");n.find("ul").append(r),r.find("input").change(function(){var e=t(this),i=e.val(),n=t("#"+i+", [headers="+i+"]");e.is(":checked")?n.show():n.hide()}).bind("updateCheck",function(){"table-cell"===i.css("display")?t(this).attr("checked",!0):t(this).attr("checked",!1)}).trigger("updateCheck")}}),t(e).bind("orientationchange resize",function(){n.find("input").trigger("updateCheck")});var s=t(".table-menu-btn");s.click(function(){return n.toggleClass("table-menu-hidden"),!1}),t(document).click(function(e){t(e.target).is(n)||t(e.target).is(n.find("*"))||n.addClass("table-menu-hidden")}),t("#EventImage").change(function(){var e=t(this).val(),i=e.split("\\").pop();t("#uploadFile").val(i)}),t("#show_hidden_categories").click(function(){return t(".hidden_category").removeClass("hidden_category"),t("#show_hidden_categories").hide(),!1})});var n,a,s=t(e);t(document).ready(function(){n=t("#EventStartDate, #EventEndDate"),a=t("#EventStartTime, #EventEndTime")}),s.on({"resize.tribe":function(){var e=s.width();e<=568?(n.prop("type","date"),a.timepicker({disableTouchKeyboard:!0})):(n.prop("type","text"),a.timepicker({disableTouchKeyboard:!1}))},load:function(){s.trigger("resize.tribe")}})}(window,jQuery);